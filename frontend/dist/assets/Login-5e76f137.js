import{a as n}from"./api-5fa05d82.js";import{_ as p,r as g,o as i,c as l,a as s,b as f,w as y,d as b,e as m,v as d,n as v,t as w,f as c,g as h}from"./index-1ef266be.js";const S={name:"Login",data(){return{loginForm:{username:"",password:""},message:"",messageType:""}},methods:{async handleLogin(){try{const t=await n("/login","POST",this.loginForm);localStorage.setItem("token",t.data.token),localStorage.setItem("username",t.data.user.username),localStorage.setItem("role",t.data.user.role),localStorage.setItem("userId",t.data.user.id),this.message="登录成功！欢迎回来，"+t.data.user.username+"！",this.messageType="success";const e=await n("/user");localStorage.setItem("userData",JSON.stringify(e.data)),setTimeout(()=>{t.data.user.role==="resident"?this.$router.push("/resident"):t.data.user.role==="property_admin"?this.$router.push("/admin"):t.data.user.role==="service_provider"&&this.$router.push("/provider")},1500)}catch(t){this.message="登录失败："+t.message,this.messageType="error"}}}},T={class:"container"},k={class:"nav-buttons"},x={class:"form-container"},F={class:"form-group"},I={class:"form-group"};function V(t,e,L,N,r,a){const u=g("router-link");return i(),l("div",T,[e[9]||(e[9]=s("h1",null,"智能社区服务平台",-1)),s("div",k,[e[4]||(e[4]=s("button",{class:"btn btn-primary"},"登录",-1)),f(u,{to:"/register",class:"btn btn-secondary"},{default:y(()=>[...e[3]||(e[3]=[h("注册",-1)])]),_:1})]),s("div",x,[e[8]||(e[8]=s("h2",null,"用户登录",-1)),s("form",{onSubmit:e[2]||(e[2]=b((...o)=>a.handleLogin&&a.handleLogin(...o),["prevent"]))},[s("div",F,[e[5]||(e[5]=s("label",{for:"username"},"用户名",-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>r.loginForm.username=o),placeholder:"请输入用户名",required:""},null,512),[[d,r.loginForm.username]])]),s("div",I,[e[6]||(e[6]=s("label",{for:"password"},"密码",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.loginForm.password=o),placeholder:"请输入密码",required:""},null,512),[[d,r.loginForm.password]])]),e[7]||(e[7]=s("button",{type:"submit",class:"btn btn-primary",style:{width:"100%","margin-bottom":"1rem"}},"登录",-1)),r.message?(i(),l("div",{key:0,class:v(["message",r.messageType])},w(r.message),3)):c("",!0)],32)])])}const D=p(S,[["render",V]]);export{D as default};
//# sourceMappingURL=Login-5e76f137.js.map
