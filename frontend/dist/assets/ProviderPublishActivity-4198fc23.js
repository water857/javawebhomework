import{c}from"./api-5fa05d82.js";import{_ as m,o as v,c as p,a as i,d as y,g as l,e as r,v as a}from"./index-1ef266be.js";const f={name:"ProviderPublishActivity",data(){return{activity:{title:"",content:"",startTime:"",endTime:"",location:"",maxParticipants:0},submitting:!1}},mounted(){const n=new Date,t=n.toISOString().slice(0,16);this.activity.startTime=t;const u=new Date(n.getTime()+2*60*60*1e3).toISOString().slice(0,16);this.activity.endTime=u},methods:{async handlePublish(){if(!this.activity.title||!this.activity.content||!this.activity.startTime||!this.activity.endTime||!this.activity.location){alert("请填写所有必填字段");return}const n=new Date(this.activity.startTime),t=new Date(this.activity.endTime);if(n<new Date){alert("开始时间不能早于当前时间");return}if(t<=n){alert("结束时间必须晚于开始时间");return}this.submitting=!0;try{const d={...this.activity,startTime:new Date(this.activity.startTime).toISOString(),endTime:new Date(this.activity.endTime).toISOString()},s=await c.publishActivity(d);s.code==="success"?(alert("活动发布成功！"),this.$router.push("/provider/activities")):alert(`活动发布失败：${s.message}`)}catch(d){console.error("活动发布失败:",d),alert("活动发布失败，请稍后重试")}finally{this.submitting=!1}},handleBack(){this.$router.push("/provider/activities")}}},b={class:"container"},T={class:"publish-form"},h={class:"form-group"},g={class:"form-group"},w={class:"form-row"},x={class:"form-group"},P={class:"form-group"},q={class:"form-group"},S={class:"form-group"},_={class:"form-actions"},k=["disabled"];function D(n,t,u,d,s,o){return v(),p("div",b,[i("header",null,[t[9]||(t[9]=i("h1",null,"发布活动",-1)),i("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>o.handleBack&&o.handleBack(...e))},"返回活动列表")]),i("div",T,[i("form",{onSubmit:t[8]||(t[8]=y((...e)=>o.handlePublish&&o.handlePublish(...e),["prevent"]))},[i("div",h,[t[10]||(t[10]=i("label",{for:"title"},[l("活动标题 "),i("span",{class:"required"},"*")],-1)),r(i("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>s.activity.title=e),required:"",placeholder:"请输入活动标题"},null,512),[[a,s.activity.title]])]),i("div",g,[t[11]||(t[11]=i("label",{for:"content"},[l("活动内容 "),i("span",{class:"required"},"*")],-1)),r(i("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=e=>s.activity.content=e),required:"",placeholder:"请输入活动详细内容",rows:"6"},null,512),[[a,s.activity.content]])]),i("div",w,[i("div",x,[t[12]||(t[12]=i("label",{for:"startTime"},[l("开始时间 "),i("span",{class:"required"},"*")],-1)),r(i("input",{type:"datetime-local",id:"startTime","onUpdate:modelValue":t[3]||(t[3]=e=>s.activity.startTime=e),required:""},null,512),[[a,s.activity.startTime]])]),i("div",P,[t[13]||(t[13]=i("label",{for:"endTime"},[l("结束时间 "),i("span",{class:"required"},"*")],-1)),r(i("input",{type:"datetime-local",id:"endTime","onUpdate:modelValue":t[4]||(t[4]=e=>s.activity.endTime=e),required:""},null,512),[[a,s.activity.endTime]])])]),i("div",q,[t[14]||(t[14]=i("label",{for:"location"},[l("活动地点 "),i("span",{class:"required"},"*")],-1)),r(i("input",{type:"text",id:"location","onUpdate:modelValue":t[5]||(t[5]=e=>s.activity.location=e),required:"",placeholder:"请输入活动地点"},null,512),[[a,s.activity.location]])]),i("div",S,[t[15]||(t[15]=i("label",{for:"maxParticipants"},"最大参与人数",-1)),r(i("input",{type:"number",id:"maxParticipants","onUpdate:modelValue":t[6]||(t[6]=e=>s.activity.maxParticipants=e),min:"0",placeholder:"0表示无限制"},null,512),[[a,s.activity.maxParticipants,void 0,{number:!0}]])]),i("div",_,[i("button",{type:"submit",class:"btn btn-primary",disabled:s.submitting},"发布活动",8,k),i("button",{type:"button",class:"btn",onClick:t[7]||(t[7]=(...e)=>o.handleBack&&o.handleBack(...e))},"取消")])],32)])])}const U=m(f,[["render",D],["__scopeId","data-v-2cd8f3e8"]]);export{U as default};
//# sourceMappingURL=ProviderPublishActivity-4198fc23.js.map
