import{_ as T,o as r,c as a,a as t,t as o,n as b,e as y,v as w,h as _,F as h,i as m,l as R,f as c,g as d,y as D}from"./index-1ef266be.js";const C={name:"ProviderServiceManagement",data(){return{username:"",activeTab:this.$route.query.tab||"tasks",tasks:[],tasksSearchKeyword:"",tasksStatusFilter:"",serviceRecords:[],recordsSearchKeyword:"",recordsStatusFilter:"",evaluations:[],filteredEvaluations:[],evaluationsSearchKeyword:"",evaluationsRatingFilter:"",evaluationsTimeFilter:"",evaluationsSortBy:"createdAt",evaluationsSortOrder:"desc",averageRating:0,totalEvaluations:0,fiveStarCount:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0},currentPage:1,pageSize:10,totalPages:1,previewImage:"",showDetail:!1,currentRepair:null,showEvaluationDetail:!1,currentEvaluation:null}},mounted(){this.username=localStorage.getItem("username"),this.fetchTasks(),this.fetchServiceRecords(),this.fetchEvaluations()},watch:{evaluationsRatingFilter(){this.fetchEvaluations()},evaluationsTimeFilter(){this.fetchEvaluations()}},methods:{fetchTasks(){const u=localStorage.getItem("token"),e=new URLSearchParams;this.tasksSearchKeyword&&e.append("searchKeyword",this.tasksSearchKeyword),this.tasksStatusFilter&&e.append("status",this.tasksStatusFilter),fetch(`/api/repair/list?${e.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error("网络请求失败，状态码："+l.status);return l.json()}).then(l=>{l.status==="success"?this.tasks=l.data.map(v=>({...v,newStatus:v.status})):alert("获取任务列表失败："+(l.message||"未知错误"))}).catch(l=>{console.error("获取任务列表失败：",l),alert("获取任务列表失败，请稍后重试")})},refreshTasks(){this.fetchTasks()},updateTaskStatus(u,e){const l=localStorage.getItem("token");fetch(`/api/repair/status/${u}`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({status:e})}).then(v=>v.json()).then(v=>{v.status==="success"?(alert("任务状态更新成功"),this.fetchTasks(),this.fetchServiceRecords()):alert("任务状态更新失败："+v.message)}).catch(v=>{console.error("任务状态更新失败：",v),alert("任务状态更新失败，请稍后重试")})},fetchServiceRecords(){const u=localStorage.getItem("token"),e=new URLSearchParams;this.recordsSearchKeyword&&e.append("searchKeyword",this.recordsSearchKeyword),this.recordsStatusFilter&&e.append("status",this.recordsStatusFilter),fetch(`/api/repair/list?${e.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}}).then(l=>l.json()).then(l=>{l.status==="success"?this.serviceRecords=l.data:alert("获取服务记录失败："+(l.message||"未知错误"))}).catch(l=>{console.error("获取服务记录失败：",l),alert("获取服务记录失败，请稍后重试")})},refreshRecords(){this.fetchServiceRecords()},fetchEvaluations(){const u=localStorage.getItem("token"),e=new URLSearchParams;this.evaluationsSearchKeyword&&e.append("searchKeyword",this.evaluationsSearchKeyword),fetch(`/api/repair/list?${e.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}}).then(l=>l.json()).then(l=>{if(l.status==="success"){const v=[];Array.isArray(l.data)&&l.data.forEach(n=>{n.evaluation&&v.push({repairId:n.id,repairContent:n.content,serviceTime:n.updateTime,...n.evaluation})});let i=v;if(this.evaluationsRatingFilter&&(i=i.filter(n=>n.rating===parseInt(this.evaluationsRatingFilter))),this.evaluationsTimeFilter){const n=parseInt(this.evaluationsTimeFilter),k=new Date;k.setDate(k.getDate()-n),i=i.filter(f=>new Date(f.createdAt)>=k)}i.sort((n,k)=>{let f=n[this.evaluationsSortBy],s=k[this.evaluationsSortBy];return(this.evaluationsSortBy==="createdAt"||this.evaluationsSortBy==="serviceTime")&&(f=new Date(f).getTime(),s=new Date(s).getTime()),this.evaluationsSortOrder==="asc"?f-s:s-f}),this.filteredEvaluations=i,this.totalEvaluations=i.length,this.totalPages=Math.ceil(this.totalEvaluations/this.pageSize),this.currentPage=1,this.updatePageEvaluations(),this.calculateEvaluationStats()}else alert("获取评价记录失败："+(l.message||"未知错误"))}).catch(l=>{console.error("获取评价记录失败：",l),alert("获取评价记录失败，请稍后重试")})},refreshEvaluations(){this.fetchEvaluations()},updatePageEvaluations(){const u=(this.currentPage-1)*this.pageSize,e=u+this.pageSize;this.evaluations=this.filteredEvaluations.slice(u,e)},calculateEvaluationStats(){const u=this.filteredEvaluations||[];if(u.length===0){this.averageRating=0,this.totalEvaluations=0,this.fiveStarCount=0,this.ratingDistribution={1:0,2:0,3:0,4:0,5:0};return}this.totalEvaluations=u.length;const e=u.reduce((l,v)=>l+v.rating,0);this.averageRating=e/this.totalEvaluations,this.ratingDistribution={1:u.filter(l=>l.rating===1).length,2:u.filter(l=>l.rating===2).length,3:u.filter(l=>l.rating===3).length,4:u.filter(l=>l.rating===4).length,5:u.filter(l=>l.rating===5).length},this.fiveStarCount=this.ratingDistribution[5]},getBarWidth(u){return this.totalEvaluations===0?0:Math.round(u/this.totalEvaluations*100)},viewImage(u){this.previewImage=u},getStatusText(u){return{pending:"待受理",processing:"处理中",completed:"已完成"}[u]||u},formatDate(u){return u?new Date(u).toLocaleString():""},viewRepairDetail(u){const e=localStorage.getItem("token");fetch(`/api/repair/detail/${u}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).then(l=>l.json()).then(l=>{l.status==="success"?(this.currentRepair=l.data,this.showDetail=!0):alert("获取报修详情失败："+l.message)}).catch(l=>{console.error("获取报修详情失败：",l),alert("获取报修详情失败，请稍后重试")})},handleBack(){this.$router.push("/provider")},handleProfile(){this.$router.push("/provider/profile")},handleLogout(){localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("realName"),localStorage.removeItem("phone"),localStorage.removeItem("email"),localStorage.removeItem("address"),localStorage.removeItem("idCard"),this.$router.push("/login")},viewEvaluationDetail(u){this.currentEvaluation=u,this.showEvaluationDetail=!0}}},I={class:"container"},F={class:"user-info"},B={class:"service-tabs"},U={class:"tab-content"},A={key:0,class:"tasks-tab"},K={class:"search-filter"},P={class:"repair-list"},x={key:0,class:"empty-state"},M={class:"repair-header"},N={class:"repair-info"},V={class:"info-section"},z={class:"repair-content"},j={key:0,class:"repair-images"},L={class:"image-grid"},G=["src","onClick"],O={class:"repair-actions"},W={class:"action-group"},q=["onUpdate:modelValue","disabled"],J=["onClick","disabled"],H=["onClick"],Q={key:1,class:"records-tab"},X={class:"search-filter"},Y={class:"repair-list"},Z={key:0,class:"empty-state"},$={class:"repair-header"},tt={class:"repair-info"},et={class:"info-section"},st={class:"repair-content"},it={key:0,class:"repair-images"},nt={class:"image-grid"},lt=["src","onClick"],ot={key:2,class:"evaluations-tab"},rt={class:"search-filter"},at={class:"evaluation-stats"},ut={class:"stat-card"},dt={class:"average-rating"},vt={class:"rating-stars"},ct={class:"stat-card"},pt={class:"stat-number"},gt={class:"stat-card"},ht={class:"stat-number"},mt={class:"stat-percentage"},ft={class:"stat-card"},bt={class:"stat-number"},kt={class:"stat-percentage"},St={class:"rating-distribution"},yt={class:"distribution-chart"},_t={class:"bar-info"},wt={class:"star-count"},Et={class:"bar-value"},Rt={class:"bar-container"},Tt={class:"bar-percentage"},Dt={class:"evaluation-list"},Ct={key:0,class:"empty-state"},It={class:"evaluation-header"},Ft={class:"evaluation-rating"},Bt={class:"evaluation-meta"},Ut={class:"evaluation-resident"},At={class:"evaluation-time"},Kt={class:"evaluation-content"},Pt={class:"evaluation-repair-info"},xt={class:"info-row"},Mt={class:"info-value"},Nt={class:"info-row"},Vt={class:"info-value"},zt={class:"info-row"},jt={class:"info-value"},Lt={class:"evaluation-footer"},Gt=["onClick"],Ot=["onClick"],Wt={key:0,class:"modal"},qt={class:"modal-content image-preview"},Jt=["src"],Ht={key:1,class:"modal"},Qt={class:"modal-content"},Xt={class:"modal-header"},Yt={class:"modal-body"},Zt={class:"repair-detail"},$t={class:"detail-section"},te={key:0},ee={key:1},se={key:2},ie={class:"detail-section"},ne={key:0},le={key:1},oe={key:2},re={class:"detail-section"},ae={class:"detail-section"},ue={class:"image-grid"},de=["src","onClick"],ve={key:1,class:"no-image"},ce={key:2,class:"modal"},pe={class:"modal-content"},ge={class:"modal-header"},he={class:"modal-body"},me={class:"evaluation-detail"},fe={class:"detail-section"},be={class:"evaluation-rating-large"},ke={class:"rating-number"},Se={class:"evaluation-content-large"},ye={class:"detail-section"},_e={class:"detail-section"},we={key:0};function Ee(u,e,l,v,i,n){var k,f;return r(),a("div",I,[t("header",null,[e[23]||(e[23]=t("h1",null,"服务商服务管理",-1)),t("div",F,[t("span",null,"欢迎您，"+o(i.username),1),t("button",{class:"btn",onClick:e[0]||(e[0]=(...s)=>n.handleBack&&n.handleBack(...s))},"返回首页"),t("button",{class:"btn",onClick:e[1]||(e[1]=(...s)=>n.handleProfile&&n.handleProfile(...s))},"个人中心"),t("button",{class:"btn",onClick:e[2]||(e[2]=(...s)=>n.handleLogout&&n.handleLogout(...s))},"退出登录")])]),t("div",B,[t("button",{class:b(["tab-btn",{active:i.activeTab==="tasks"}]),onClick:e[3]||(e[3]=s=>i.activeTab="tasks")},"任务管理",2),t("button",{class:b(["tab-btn",{active:i.activeTab==="records"}]),onClick:e[4]||(e[4]=s=>i.activeTab="records")},"服务记录",2),t("button",{class:b(["tab-btn",{active:i.activeTab==="evaluations"}]),onClick:e[5]||(e[5]=s=>i.activeTab="evaluations")},"服务评价",2)]),t("div",U,[i.activeTab==="tasks"?(r(),a("div",A,[t("div",K,[y(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>i.tasksSearchKeyword=s),placeholder:"搜索报修内容或单号",class:"search-input"},null,512),[[w,i.tasksSearchKeyword]]),y(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>i.tasksStatusFilter=s),class:"filter-select"},[...e[24]||(e[24]=[t("option",{value:""},"全部状态",-1),t("option",{value:"pending"},"待受理",-1),t("option",{value:"processing"},"处理中",-1),t("option",{value:"completed"},"已完成",-1)])],512),[[_,i.tasksStatusFilter]]),t("button",{class:"btn",onClick:e[8]||(e[8]=(...s)=>n.fetchTasks&&n.fetchTasks(...s))},"查询"),t("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...s)=>n.refreshTasks&&n.refreshTasks(...s))},"刷新任务")]),t("div",P,[i.tasks.length===0?(r(),a("div",x,[...e[25]||(e[25]=[t("p",null,"暂无分配的任务",-1)])])):(r(!0),a(h,{key:1},m(i.tasks,s=>{var g,p;return r(),a("div",{class:"repair-item",key:s.id},[t("div",M,[t("h3",null,"任务单号："+o(s.id),1),t("span",{class:b(["status",s.status])},o(n.getStatusText(s.status)),3)]),t("div",N,[t("div",V,[t("p",null,[e[26]||(e[26]=t("strong",null,"居民：",-1)),d(o(((g=s.resident)==null?void 0:g.realName)||s.residentName||s.residentId),1)]),t("p",null,[e[27]||(e[27]=t("strong",null,"报修时间：",-1)),d(o(n.formatDate(s.createdAt)),1)]),t("p",null,[e[28]||(e[28]=t("strong",null,"联系电话：",-1)),d(o(((p=s.resident)==null?void 0:p.phone)||s.phone),1)])])]),t("div",z,[t("p",null,[e[29]||(e[29]=t("strong",null,"报修内容：",-1)),d(o(s.content),1)])]),s.images&&s.images.length>0?(r(),a("div",j,[e[30]||(e[30]=t("strong",null,"报修图片：",-1)),t("div",L,[(r(!0),a(h,null,m(s.images,(S,E)=>(r(),a("img",{key:E,src:S.imageUrl,class:"repair-image",onClick:Re=>n.viewImage(S.imageUrl)},null,8,G))),128))])])):c("",!0),t("div",O,[t("div",W,[y(t("select",{"onUpdate:modelValue":S=>s.newStatus=S,class:"select-status",disabled:s.status==="completed"},[...e[31]||(e[31]=[t("option",{value:"pending"},"待受理",-1),t("option",{value:"processing"},"处理中",-1),t("option",{value:"completed"},"已完成",-1)])],8,q),[[_,s.newStatus]]),t("button",{class:"btn btn-primary",onClick:S=>n.updateTaskStatus(s.id,s.newStatus),disabled:s.status==="completed"},"更新进度",8,J)]),t("button",{class:"btn btn-info",onClick:S=>n.viewRepairDetail(s.id)},"查看详情",8,H)])])}),128))])])):i.activeTab==="records"?(r(),a("div",Q,[t("div",X,[y(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=s=>i.recordsSearchKeyword=s),placeholder:"搜索服务记录或单号",class:"search-input"},null,512),[[w,i.recordsSearchKeyword]]),y(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>i.recordsStatusFilter=s),class:"filter-select"},[...e[32]||(e[32]=[t("option",{value:""},"全部状态",-1),t("option",{value:"pending"},"待受理",-1),t("option",{value:"processing"},"处理中",-1),t("option",{value:"completed"},"已完成",-1)])],512),[[_,i.recordsStatusFilter]]),t("button",{class:"btn",onClick:e[12]||(e[12]=(...s)=>n.fetchServiceRecords&&n.fetchServiceRecords(...s))},"查询"),t("button",{class:"btn btn-primary",onClick:e[13]||(e[13]=(...s)=>n.refreshRecords&&n.refreshRecords(...s))},"刷新记录")]),t("div",Y,[i.serviceRecords.length===0?(r(),a("div",Z,[...e[33]||(e[33]=[t("p",null,"暂无服务记录",-1)])])):(r(!0),a(h,{key:1},m(i.serviceRecords,s=>{var g;return r(),a("div",{class:"repair-item",key:s.id},[t("div",$,[t("h3",null,"服务单号："+o(s.id),1),t("span",{class:b(["status",s.status])},o(n.getStatusText(s.status)),3)]),t("div",tt,[t("div",et,[t("p",null,[e[34]||(e[34]=t("strong",null,"居民：",-1)),d(o(((g=s.resident)==null?void 0:g.realName)||s.residentName||s.residentId),1)]),t("p",null,[e[35]||(e[35]=t("strong",null,"报修时间：",-1)),d(o(n.formatDate(s.createdAt)),1)]),t("p",null,[e[36]||(e[36]=t("strong",null,"完成时间：",-1)),d(o(s.status==="completed"?n.formatDate(s.completedTime):"未完成"),1)])])]),t("div",st,[t("p",null,[e[37]||(e[37]=t("strong",null,"报修内容：",-1)),d(o(s.content),1)])]),s.images&&s.images.length>0?(r(),a("div",it,[e[38]||(e[38]=t("strong",null,"报修图片：",-1)),t("div",nt,[(r(!0),a(h,null,m(s.images,(p,S)=>(r(),a("img",{key:S,src:p.imageUrl,class:"repair-image",onClick:E=>n.viewImage(p.imageUrl)},null,8,lt))),128))])])):c("",!0)])}),128))])])):i.activeTab==="evaluations"?(r(),a("div",ot,[t("div",rt,[y(t("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=s=>i.evaluationsSearchKeyword=s),placeholder:"搜索评价内容",class:"search-input"},null,512),[[w,i.evaluationsSearchKeyword]]),y(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>i.evaluationsRatingFilter=s),class:"filter-select"},[...e[39]||(e[39]=[R('<option value="" data-v-adc85ecf>全部评分</option><option value="1" data-v-adc85ecf>1星</option><option value="2" data-v-adc85ecf>2星</option><option value="3" data-v-adc85ecf>3星</option><option value="4" data-v-adc85ecf>4星</option><option value="5" data-v-adc85ecf>5星</option>',6)])],512),[[_,i.evaluationsRatingFilter]]),y(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>i.evaluationsTimeFilter=s),class:"filter-select"},[...e[40]||(e[40]=[R('<option value="" data-v-adc85ecf>全部时间</option><option value="7" data-v-adc85ecf>最近7天</option><option value="30" data-v-adc85ecf>最近30天</option><option value="90" data-v-adc85ecf>最近90天</option><option value="180" data-v-adc85ecf>最近6个月</option>',5)])],512),[[_,i.evaluationsTimeFilter]]),t("button",{class:"btn",onClick:e[17]||(e[17]=(...s)=>n.fetchEvaluations&&n.fetchEvaluations(...s))},"查询"),t("button",{class:"btn btn-primary",onClick:e[18]||(e[18]=(...s)=>n.refreshEvaluations&&n.refreshEvaluations(...s))},"刷新评价")]),t("div",at,[t("div",ut,[e[41]||(e[41]=t("h4",null,"平均评分",-1)),t("div",dt,[t("span",null,o(i.averageRating.toFixed(1)),1),t("div",vt,[(r(),a(h,null,m(5,s=>t("span",{key:s,class:b(["star",{filled:s<=Math.round(i.averageRating)}])},"★",2)),64))])])]),t("div",ct,[e[42]||(e[42]=t("h4",null,"评价总数",-1)),t("span",pt,o(i.totalEvaluations),1)]),t("div",gt,[e[43]||(e[43]=t("h4",null,"5星好评",-1)),t("span",ht,o(i.fiveStarCount),1),t("span",mt,o(i.totalEvaluations>0?Math.round(i.fiveStarCount/i.totalEvaluations*100):0)+"%",1)]),t("div",ft,[e[44]||(e[44]=t("h4",null,"好评率",-1)),t("span",bt,o(i.ratingDistribution[4]+i.ratingDistribution[5]),1),t("span",kt,o(i.totalEvaluations>0?Math.round((i.ratingDistribution[4]+i.ratingDistribution[5])/i.totalEvaluations*100):0)+"%",1)])]),t("div",St,[e[45]||(e[45]=t("h3",null,"评分分布",-1)),t("div",yt,[(r(),a(h,null,m(5,s=>t("div",{key:s,class:"distribution-bar"},[t("div",_t,[t("span",wt,o(s)+"星",1),t("span",Et,o(i.ratingDistribution[s]),1)]),t("div",Rt,[t("div",{class:"bar",style:D({width:n.getBarWidth(i.ratingDistribution[s])+"%"})},null,4)]),t("span",Tt,o(i.totalEvaluations>0?Math.round(i.ratingDistribution[s]/i.totalEvaluations*100):0)+"%",1)])),64))])]),t("div",Dt,[i.evaluations.length===0?(r(),a("div",Ct,[...e[46]||(e[46]=[t("p",null,"暂无评价记录",-1)])])):(r(!0),a(h,{key:1},m(i.evaluations,s=>{var g;return r(),a("div",{class:"evaluation-item",key:s.repairId},[t("div",It,[t("div",Ft,[(r(),a(h,null,m(5,p=>t("span",{key:p,class:b(["star",{filled:p<=s.rating}])},"★",2)),64))]),t("div",Bt,[t("span",Ut,o(((g=s.resident)==null?void 0:g.realName)||"匿名居民"),1),t("span",At,o(n.formatDate(s.createdAt)),1)])]),t("div",Kt,[t("p",null,o(s.comment||"暂无评价内容"),1)]),t("div",Pt,[t("div",xt,[e[47]||(e[47]=t("span",{class:"info-label"},"相关服务单：",-1)),t("span",Mt,o(s.repairId),1)]),t("div",Nt,[e[48]||(e[48]=t("span",{class:"info-label"},"服务内容：",-1)),t("span",Vt,o(s.repairContent),1)]),t("div",zt,[e[49]||(e[49]=t("span",{class:"info-label"},"服务时间：",-1)),t("span",jt,o(n.formatDate(s.serviceTime)),1)])]),t("div",Lt,[t("button",{class:"btn btn-sm btn-primary",onClick:p=>n.viewEvaluationDetail(s)},"查看评价详情",8,Gt),t("button",{class:"btn btn-sm btn-info",onClick:p=>n.viewRepairDetail(s.repairId)},"查看服务详情",8,Ot)])])}),128))])])):c("",!0)]),i.previewImage?(r(),a("div",Wt,[t("div",qt,[t("button",{class:"close-btn",onClick:e[19]||(e[19]=s=>i.previewImage="")},"×"),t("img",{src:i.previewImage,alt:"图片预览"},null,8,Jt)])])):c("",!0),i.showDetail&&i.currentRepair?(r(),a("div",Ht,[t("div",Qt,[t("div",Xt,[e[50]||(e[50]=t("h3",null,"报修详情",-1)),t("button",{class:"close-btn",onClick:e[20]||(e[20]=s=>i.showDetail=!1)},"×")]),t("div",Yt,[t("div",Zt,[t("div",$t,[e[57]||(e[57]=t("h4",null,"基本信息",-1)),t("p",null,[e[51]||(e[51]=t("strong",null,"报修单号：",-1)),d(o(i.currentRepair.id),1)]),t("p",null,[e[52]||(e[52]=t("strong",null,"状态：",-1)),t("span",{class:b(["status",i.currentRepair.status])},o(n.getStatusText(i.currentRepair.status)),3)]),t("p",null,[e[53]||(e[53]=t("strong",null,"报修时间：",-1)),d(o(n.formatDate(i.currentRepair.createdAt)),1)]),i.currentRepair.updatedAt?(r(),a("p",te,[e[54]||(e[54]=t("strong",null,"更新时间：",-1)),d(o(n.formatDate(i.currentRepair.updatedAt)),1)])):c("",!0),i.currentRepair.repairTime?(r(),a("p",ee,[e[55]||(e[55]=t("strong",null,"处理时间：",-1)),d(o(n.formatDate(i.currentRepair.repairTime)),1)])):c("",!0),i.currentRepair.completedTime?(r(),a("p",se,[e[56]||(e[56]=t("strong",null,"完成时间：",-1)),d(o(n.formatDate(i.currentRepair.completedTime)),1)])):c("",!0)]),t("div",ie,[e[63]||(e[63]=t("h4",null,"居民信息",-1)),t("p",null,[e[58]||(e[58]=t("strong",null,"居民ID：",-1)),d(o(i.currentRepair.residentId),1)]),t("p",null,[e[59]||(e[59]=t("strong",null,"姓名：",-1)),d(o(i.currentRepair.resident.realName),1)]),i.currentRepair.resident.phone?(r(),a("p",ne,[e[60]||(e[60]=t("strong",null,"手机号：",-1)),d(o(i.currentRepair.resident.phone),1)])):c("",!0),i.currentRepair.resident.email?(r(),a("p",le,[e[61]||(e[61]=t("strong",null,"邮箱：",-1)),d(o(i.currentRepair.resident.email),1)])):c("",!0),i.currentRepair.resident.address?(r(),a("p",oe,[e[62]||(e[62]=t("strong",null,"居住地址：",-1)),d(o(i.currentRepair.resident.address),1)])):c("",!0)]),t("div",re,[e[64]||(e[64]=t("h4",null,"报修内容",-1)),t("p",null,o(i.currentRepair.content),1)]),t("div",ae,[e[65]||(e[65]=t("h4",null,"报修图片",-1)),t("div",ue,[i.currentRepair.images&&i.currentRepair.images.length>0?(r(!0),a(h,{key:0},m(i.currentRepair.images,(s,g)=>(r(),a("img",{key:g,src:s.imageUrl,class:"repair-image",onClick:p=>n.viewImage(s.imageUrl)},null,8,de))),128)):(r(),a("p",ve,"暂无报修图片"))])])])])])])):c("",!0),i.showEvaluationDetail&&i.currentEvaluation?(r(),a("div",ce,[t("div",pe,[t("div",ge,[e[66]||(e[66]=t("h3",null,"评价详情",-1)),t("button",{class:"close-btn",onClick:e[21]||(e[21]=s=>i.showEvaluationDetail=!1)},"×")]),t("div",he,[t("div",me,[t("div",fe,[e[68]||(e[68]=t("h4",null,"评价信息",-1)),t("div",be,[(r(),a(h,null,m(5,s=>t("span",{key:s,class:b(["star",{filled:s<=i.currentEvaluation.rating}])},"★",2)),64)),t("span",ke,o(i.currentEvaluation.rating),1)]),t("p",null,[e[67]||(e[67]=t("strong",null,"评价时间：",-1)),d(o(n.formatDate(i.currentEvaluation.createdAt)),1)]),e[69]||(e[69]=t("p",null,[t("strong",null,"评价内容：")],-1)),t("div",Se,[t("p",null,o(i.currentEvaluation.comment||"暂无评价内容"),1)])]),t("div",ye,[e[73]||(e[73]=t("h4",null,"服务单信息",-1)),t("p",null,[e[70]||(e[70]=t("strong",null,"服务单号：",-1)),d(o(i.currentEvaluation.repairId),1)]),t("p",null,[e[71]||(e[71]=t("strong",null,"服务内容：",-1)),d(o(i.currentEvaluation.repairContent),1)]),t("p",null,[e[72]||(e[72]=t("strong",null,"服务时间：",-1)),d(o(n.formatDate(i.currentEvaluation.serviceTime)),1)]),t("button",{class:"btn btn-sm btn-info",onClick:e[22]||(e[22]=s=>{n.viewRepairDetail(i.currentEvaluation.repairId),i.showEvaluationDetail=!1})},"查看完整服务单")]),t("div",_e,[e[76]||(e[76]=t("h4",null,"居民信息",-1)),t("p",null,[e[74]||(e[74]=t("strong",null,"居民姓名：",-1)),d(o(((k=i.currentEvaluation.resident)==null?void 0:k.realName)||"匿名居民"),1)]),(f=i.currentEvaluation.resident)!=null&&f.phone?(r(),a("p",we,[e[75]||(e[75]=t("strong",null,"联系电话：",-1)),d(o(i.currentEvaluation.resident.phone),1)])):c("",!0)])])])])])):c("",!0)])}const De=T(C,[["render",Ee],["__scopeId","data-v-adc85ecf"]]);export{De as default};
//# sourceMappingURL=ProviderServiceManagement-a775953f.js.map
