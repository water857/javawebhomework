{"version":3,"file":"AdminPublishAnnouncement-08d62c0b.js","sources":["../../src/views/AdminPublishAnnouncement.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h1>发布公告</h1>\n      <button class=\"btn\" @click=\"handleBack\">返回公告列表</button>\n    </header>\n\n    <div class=\"publish-form\">\n      <form @submit.prevent=\"handlePublish\">\n        <div class=\"form-group\">\n          <label for=\"title\">公告标题 <span class=\"required\">*</span></label>\n          <input type=\"text\" id=\"title\" v-model=\"announcement.title\" required placeholder=\"请输入公告标题\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"content\">公告内容 <span class=\"required\">*</span></label>\n          <textarea id=\"content\" v-model=\"announcement.content\" required placeholder=\"请输入公告详细内容\" rows=\"10\"></textarea>\n        </div>\n\n        <div class=\"form-actions\">\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"submitting\">发布公告</button>\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"handleSaveDraft\" :disabled=\"submitting\">保存草稿</button>\n          <button type=\"button\" class=\"btn\" @click=\"handleBack\">取消</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { announcementApi } from '../services/api';\n\nexport default {\n  name: 'AdminPublishAnnouncement',\n  data() {\n    return {\n      announcement: {\n        title: '',\n        content: ''\n      },\n      submitting: false\n    }\n  },\n  methods: {\n    async handlePublish() {\n      this.submitting = true;\n      try {\n        // 验证表单数据\n        if (!this.announcement.title.trim() || !this.announcement.content.trim()) {\n          alert('标题和内容不能为空');\n          return;\n        }\n\n        const response = await announcementApi.publishAnnouncement(this.announcement);\n        if (response.code === 'success') {\n          alert('公告发布成功！');\n          this.$router.push('/admin/announcements');\n        } else {\n          alert(`公告发布失败：${response.message}`);\n        }\n      } catch (error) {\n        console.error('发布公告失败:', error);\n        alert('发布公告失败，请稍后重试');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    async handleSaveDraft() {\n      this.submitting = true;\n      try {\n        // 验证表单数据\n        if (!this.announcement.title.trim() || !this.announcement.content.trim()) {\n          alert('标题和内容不能为空');\n          return;\n        }\n\n        const response = await announcementApi.saveDraft(this.announcement);\n        if (response.code === 'success') {\n          alert('草稿保存成功！');\n          this.$router.push('/admin/announcements');\n        } else {\n          alert(`草稿保存失败：${response.message}`);\n        }\n      } catch (error) {\n        console.error('保存草稿失败:', error);\n        alert('保存草稿失败，请稍后重试');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    handleBack() {\n      this.$router.push('/admin/announcements');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.publish-form {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-row {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 15px;\n}\n\n.form-row .form-group {\n  flex: 1;\n  margin-bottom: 0;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.required {\n  color: #ff4d4f;\n}\n\ninput[type=\"text\"],\ntextarea,\ninput[type=\"number\"],\ninput[type=\"datetime-local\"] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\ntextarea {\n  resize: vertical;\n  min-height: 150px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-start;\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid #eee;\n}\n\n.btn-primary {\n  background-color: #1890ff;\n  color: white;\n}\n\n.btn-secondary {\n  background-color: #faad14;\n  color: white;\n}\n\n.btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n</style>"],"names":["_sfc_main","response","announcementApi","error","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_createElementVNode","_cache","$options","args","$event","$data","_vModelText","_hoisted_6","_hoisted_7"],"mappings":"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"}