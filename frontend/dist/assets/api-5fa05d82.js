const o="http://localhost:8080/backend/api",p={getUserInfo(){return a("/user")},updateProfile(e){return a("/profile/update","PUT",e)},updateIdCard(e){return a("/profile/update-idcard","PUT",e)},changePassword(e){return a("/change-password","POST",e)}};function u(){let e="";typeof localStorage<"u"&&(e=localStorage.getItem("token"));const t={"Content-Type":"application/json"};return e&&e.trim()!==""&&(t.Authorization=`Bearer ${e}`),t}async function c(e){if(!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.message||`HTTP错误!状态: ${e.status}`)}const t=await e.json();if(t.code||t.status){if((t.code||t.status)==="error")throw new Error(t.message);return t}return t}async function a(e,t="GET",n=null){const r=`${o}${e}`,i={method:t,headers:u()};n&&(t==="POST"||t==="PUT"||t==="PATCH")&&(i.body=JSON.stringify(n));try{const s=await fetch(r,i);return await c(s)}catch(s){throw console.error("API请求失败:",s),s}}const d={getActivities(e=1,t=10,n="",r=""){let i=`/activities?page=${e}&pageSize=${t}`;return n&&(i+=`&search=${encodeURIComponent(n)}`),r&&(i+=`&status=${r}`),a(i)},getActivityDetail(e){return a(`/activities/${e}`)},publishActivity(e){return a("/activities","POST",e)},registerForActivity(e){return a(`/activities/register/${e}`,"POST")},checkin(e){return a(`/activities/checkin/${e}`,"POST")},evaluateActivity(e,t){return a(`/activities/evaluate/${e}`,"POST",t)},uploadActivityImage(e,t){return a(`/activities/images/${e}`,"POST",{imageUrl:t})},generateCheckinQrCode(e){return a(`/activities/qrcode/${e}`,"POST")},cancelRegistration(e){return a(`/activities/cancel/${e}`,"DELETE")},getUserActivities(e,t=1,n=10,r="",i=""){let s=`/activities/user/${e}?page=${t}&pageSize=${n}`;return r&&(s+=`&search=${encodeURIComponent(r)}`),i&&(s+=`&status=${i}`),a(s)},getActivityParticipants(e,t=1,n=10){return a(`/activities/participants/${e}?page=${t}&pageSize=${n}`)},getActivityImages(e){return a(`/activities/images/${e}`)},updateActivity(e,t){return a(`/activities/${e}`,"PUT",t)},updateActivityStatus(e,t){return a(`/activities/status/${e}`,"PUT",{status:t})},deleteActivity(e){return a(`/activities/${e}`,"DELETE")}},l={getAnnouncements(e=1,t=10,n="",r=null){let i=`/announcements?page=${e}&pageSize=${t}`;return n&&(i+=`&search=${encodeURIComponent(n)}`),r!==null&&(i+=`&status=${r}`),a(i)},getLatestAnnouncements(e=5){return a(`/announcements/latest?limit=${e}`)},getAnnouncementDetail(e){return a(`/announcements/${e}`)},publishAnnouncement(e){return a("/announcements","POST",e)},saveDraft(e){return e.action="saveDraft",a("/announcements","POST",e)},updateAnnouncement(e,t){return a(`/announcements/${e}`,"PUT",t)},updateAnnouncementStatus(e,t){return a(`/announcements/status/${e}`,"PUT",{status:t})},deleteAnnouncement(e){return a(`/announcements/${e}`,"DELETE")},getAuthorAnnouncements(e,t=1,n=10,r="",i=null){let s=`/announcements/author/${e}?page=${t}&pageSize=${n}`;return r&&(s+=`&search=${encodeURIComponent(r)}`),i!==null&&(s+=`&status=${i}`),a(s)}},$={getWeatherTips(e){let t="/weather";return e&&(t+=`?city=${e}`),a(t)}},m={getBills(e=1,t=10,n={}){let r=`/property-fee/bills?page=${e}&pageSize=${t}`;return n.period&&(r+=`&period=${n.period}`),n.status&&(r+=`&status=${n.status}`),n.startDate&&(r+=`&startDate=${n.startDate}`),n.endDate&&(r+=`&endDate=${n.endDate}`),a(r)},getBillDetail(e){return a(`/property-fee/bills/${e}`)},initiatePayment(e){return a("/property-fee/pay","POST",e)},getPaymentHistory(e=1,t=10,n={}){let r=`/property-fee/payments?page=${e}&pageSize=${t}`;return n.period&&(r+=`&period=${n.period}`),n.startDate&&(r+=`&startDate=${n.startDate}`),n.endDate&&(r+=`&endDate=${n.endDate}`),n.minAmount&&(r+=`&minAmount=${n.minAmount}`),n.maxAmount&&(r+=`&maxAmount=${n.maxAmount}`),n.billId&&(r+=`&billId=${n.billId}`),a(r)},batchGenerateBills(e){return a("/admin/property-fee/bills/batch","POST",e)},updateBill(e,t){return a(`/admin/property-fee/bills/${e}`,"PUT",t)},deleteBill(e){return a(`/admin/property-fee/bills/${e}`,"DELETE")},getAllBills(e={}){let t="/admin/property-fee/bills",n=!1;return e.status&&(t+=`?status=${e.status}`,n=!0),e.startDate&&(t+=`${n?"&":"?"}startDate=${e.startDate}`,n=!0),e.endDate&&(t+=`${n?"&":"?"}endDate=${e.endDate}`),a(t)},getStatistics(e={}){let t="/admin/property-fee/statistics",n=[];return e.period&&n.push(`period=${e.period}`),e.startDate&&n.push(`startDate=${e.startDate}`),e.endDate&&n.push(`endDate=${e.endDate}`),e.building&&n.push(`building=${e.building}`),n.length>0&&(t+=`?${n.join("&")}`),a(t)},startReconciliation(e){return a("/admin/property-fee/reconcile","POST",e)},getReconciliationHistory(){return a("/admin/property-fee/reconcile/history")},resolveException(e){return a(`/admin/property-fee/reconcile/resolve/${e}`,"POST")},sendReminder(e){return a(`/admin/property-fee/bills/${e}/remind`,"POST")},sendBatchReminders(e){return a("/admin/property-fee/reminders","POST",e)}};export{a,l as b,d as c,m as p,p as u,$ as w};
//# sourceMappingURL=api-5fa05d82.js.map
