{"version":3,"file":"AdminActivities-9fd79324.js","sources":["../../src/views/AdminActivities.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h1>活动管理</h1>\n      <div class=\"header-actions\">\n        <button class=\"btn btn-primary\" @click=\"handlePublishActivity\">发布活动</button>\n        <button class=\"btn\" @click=\"handleBack\">返回首页</button>\n      </div>\n    </header>\n\n    <div class=\"activities-section\">\n      <div class=\"filter-section\">\n        <input type=\"text\" v-model=\"searchQuery\" placeholder=\"搜索活动\" class=\"search-input\">\n        <select v-model=\"statusFilter\" class=\"filter-select\">\n          <option value=\"\">全部状态</option>\n          <option value=\"pending\">待开始</option>\n          <option value=\"ongoing\">进行中</option>\n          <option value=\"completed\">已完成</option>\n          <option value=\"cancelled\">已取消</option>\n        </select>\n        <button class=\"btn\" @click=\"fetchActivities\">筛选</button>\n      </div>\n\n      <div class=\"activities-list\">\n        <div v-if=\"loading\" class=\"loading\">加载中...</div>\n        <div v-else-if=\"activities.length === 0\" class=\"no-data\">暂无活动</div>\n        <div v-else class=\"activity-card\" v-for=\"activity in activities\" :key=\"activity.id\">\n          <div @click=\"handleActivityDetail(activity.id)\">\n            <h3>{{ activity.title }}</h3>\n            <p class=\"activity-date\">{{ formatDateTime(activity.startTime) }} - {{ formatDateTime(activity.endTime) }}</p>\n            <p class=\"activity-location\">{{ activity.location }}</p>\n            <p class=\"activity-status\" :class=\"activity.status\">{{ getStatusText(activity.status) }}</p>\n            <div class=\"activity-info\">\n              <span>发布者: {{ activity.publisherName || '匿名' }}</span>\n              <span>参与人数: {{ activity.currentParticipants }}/{{ activity.maxParticipants || '无限制' }}</span>\n            </div>\n          </div>\n          <div class=\"activity-actions\" v-if=\"activity.userId == currentUserId\">\n            <button class=\"btn btn-edit\" @click.stop=\"handleEditActivity(activity.id)\">编辑</button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"pagination\" v-if=\"totalPages > 1\">\n        <button class=\"btn\" @click=\"currentPage > 1 && (currentPage--, fetchActivities())\" :disabled=\"currentPage === 1\">上一页</button>\n        <span>{{ currentPage }}/{{ totalPages }}</span>\n        <button class=\"btn\" @click=\"currentPage < totalPages && (currentPage++, fetchActivities())\" :disabled=\"currentPage === totalPages\">下一页</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { activityApi } from '../services/api';\n\nexport default {\n  name: 'AdminActivities',\n  data() {\n    return {\n      activities: [],\n      loading: false,\n      searchQuery: '',\n      statusFilter: '',\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 1,\n      currentUserId: localStorage.getItem('userId'),\n      userRole: localStorage.getItem('role')\n    }\n  },\n  mounted() {\n    this.fetchActivities();\n  },\n  methods: {\n    async fetchActivities() {\n      this.loading = true;\n      try {\n        const response = await activityApi.getActivities(this.currentPage, this.pageSize, this.searchQuery, this.statusFilter);\n        if (response.code === 'success') {\n          this.activities = response.data;\n          this.totalPages = response.totalPages || 1;\n        } else {\n          console.error('获取活动列表失败:', response.message);\n        }\n      } catch (error) {\n        console.error('获取活动列表失败:', error);\n        alert('获取活动列表失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleActivityDetail(activityId) {\n      this.$router.push(`/admin/activities/${activityId}`);\n    },\n    handlePublishActivity() {\n      this.$router.push('/admin/activities/publish');\n    },\n    handleBack() {\n      this.$router.push('/admin');\n    },\n    handleEditActivity(activityId) {\n      this.$router.push(`/admin/activities/edit/${activityId}`);\n    },\n    formatDateTime(dateTime) {\n      if (!dateTime) return '';\n      const date = new Date(dateTime);\n      return date.toLocaleString('zh-CN');\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'pending': '待开始',\n        'ongoing': '进行中',\n        'completed': '已完成',\n        'cancelled': '已取消'\n      };\n      return statusMap[status] || status;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.header-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.activities-section {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.filter-section {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  flex-wrap: wrap;\n}\n\n.search-input, .filter-select {\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.search-input {\n  width: 250px;\n}\n\n.activities-list {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.activity-card {\n  border: 1px solid #eee;\n  border-radius: 8px;\n  padding: 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #fafafa;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.activity-card:hover {\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);\n  transform: translateY(-2px);\n}\n\n.activity-card h3 {\n  margin: 0 0 8px 0;\n  color: #333;\n}\n\n.activity-date, .activity-location {\n  margin: 5px 0;\n  color: #666;\n  font-size: 14px;\n}\n\n.activity-status {\n  display: inline-block;\n  padding: 3px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: bold;\n  margin: 5px 0;\n}\n\n.activity-status.pending {\n  background-color: #e6f7ff;\n  color: #1890ff;\n}\n\n.activity-status.ongoing {\n  background-color: #f6ffed;\n  color: #52c41a;\n}\n\n.activity-status.completed {\n  background-color: #fff7e6;\n  color: #fa8c16;\n}\n\n.activity-status.cancelled {\n  background-color: #fff2f0;\n  color: #ff4d4f;\n}\n\n.activity-info {\n  display: flex;\n  gap: 15px;\n  margin-top: 10px;\n  font-size: 14px;\n  color: #888;\n}\n\n.activity-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.btn-edit {\n  background-color: #1890ff;\n  color: white;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 20px;\n  gap: 10px;\n}\n\n.loading, .no-data {\n  text-align: center;\n  padding: 50px 0;\n  color: #666;\n}\n</style>"],"names":["_sfc_main","response","activityApi","error","activityId","dateTime","status","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_9","_hoisted_10","_hoisted_11","_openBlock","_createElementBlock","_createElementVNode","_cache","$options","args","$data","$event","_hoisted_6","_hoisted_7","_Fragment","_renderList","activity","_toDisplayString","_normalizeClass","_hoisted_12","_withModifiers","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16"],"mappings":"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"}