{"version":3,"file":"AdminPublishActivity-9b838767.js","sources":["../../src/views/AdminPublishActivity.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h1>发布活动</h1>\n      <button class=\"btn\" @click=\"handleBack\">返回活动列表</button>\n    </header>\n\n    <div class=\"publish-form\">\n      <form @submit.prevent=\"handlePublish\">\n        <div class=\"form-group\">\n          <label for=\"title\">活动标题 <span class=\"required\">*</span></label>\n          <input type=\"text\" id=\"title\" v-model=\"activity.title\" required placeholder=\"请输入活动标题\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"content\">活动内容 <span class=\"required\">*</span></label>\n          <textarea id=\"content\" v-model=\"activity.content\" required placeholder=\"请输入活动详细内容\" rows=\"6\"></textarea>\n        </div>\n\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label for=\"startTime\">开始时间 <span class=\"required\">*</span></label>\n            <input type=\"datetime-local\" id=\"startTime\" v-model=\"activity.startTime\" required>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"endTime\">结束时间 <span class=\"required\">*</span></label>\n            <input type=\"datetime-local\" id=\"endTime\" v-model=\"activity.endTime\" required>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"location\">活动地点 <span class=\"required\">*</span></label>\n          <input type=\"text\" id=\"location\" v-model=\"activity.location\" required placeholder=\"请输入活动地点\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"maxParticipants\">最大参与人数</label>\n          <input type=\"number\" id=\"maxParticipants\" v-model.number=\"activity.maxParticipants\" min=\"0\" placeholder=\"0表示无限制\">\n        </div>\n\n        <div class=\"form-actions\">\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"submitting\">发布活动</button>\n          <button type=\"button\" class=\"btn\" @click=\"handleBack\">取消</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { activityApi } from '../services/api';\n\nexport default {\n  name: 'AdminPublishActivity',\n  data() {\n    return {\n      activity: {\n        title: '',\n        content: '',\n        startTime: '',\n        endTime: '',\n        location: '',\n        maxParticipants: 0\n      },\n      submitting: false\n    }\n  },\n  methods: {\n    async handlePublish() {\n      this.submitting = true;\n      try {\n        // 验证开始时间和结束时间\n        const startTime = new Date(this.activity.startTime);\n        const endTime = new Date(this.activity.endTime);\n        if (endTime <= startTime) {\n          alert('结束时间必须晚于开始时间');\n          return;\n        }\n\n        // 格式化日期时间为完整的ISO 8601格式（包含秒和毫秒）\n        const activityData = {\n          ...this.activity,\n          startTime: new Date(this.activity.startTime).toISOString(),\n          endTime: new Date(this.activity.endTime).toISOString()\n        };\n        \n        const response = await activityApi.publishActivity(activityData);\n        if (response.code === 'success') {\n          alert('活动发布成功！');\n          this.$router.push('/admin/activities');\n        } else {\n          alert(`活动发布失败：${response.message}`);\n        }\n      } catch (error) {\n        console.error('发布活动失败:', error);\n        alert('发布活动失败，请稍后重试');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    handleBack() {\n      this.$router.push('/admin/activities');\n    }\n  }\n}\n</script>"],"names":["_sfc_main","startTime","activityData","response","activityApi","error","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_openBlock","_createElementBlock","_createElementVNode","_cache","$options","args","$event","$data","_vModelText","_hoisted_11"],"mappings":"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"}