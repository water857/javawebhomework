import{b as a}from"./api-5fa05d82.js";import{_ as d,o as c,c as m,a as n,d as b,g as r,e as l,v as u}from"./index-1ef266be.js";const h={name:"AdminPublishAnnouncement",data(){return{announcement:{title:"",content:""},submitting:!1}},methods:{async handlePublish(){this.submitting=!0;try{if(!this.announcement.title.trim()||!this.announcement.content.trim()){alert("标题和内容不能为空");return}const s=await a.publishAnnouncement(this.announcement);s.code==="success"?(alert("公告发布成功！"),this.$router.push("/admin/announcements")):alert(`公告发布失败：${s.message}`)}catch(s){console.error("发布公告失败:",s),alert("发布公告失败，请稍后重试")}finally{this.submitting=!1}},async handleSaveDraft(){this.submitting=!0;try{if(!this.announcement.title.trim()||!this.announcement.content.trim()){alert("标题和内容不能为空");return}const s=await a.saveDraft(this.announcement);s.code==="success"?(alert("草稿保存成功！"),this.$router.push("/admin/announcements")):alert(`草稿保存失败：${s.message}`)}catch(s){console.error("保存草稿失败:",s),alert("保存草稿失败，请稍后重试")}finally{this.submitting=!1}},handleBack(){this.$router.push("/admin/announcements")}}},f={class:"container"},p={class:"publish-form"},v={class:"form-group"},_={class:"form-group"},y={class:"form-actions"},g=["disabled"],k=["disabled"];function x(s,e,A,B,o,i){return c(),m("div",f,[n("header",null,[e[6]||(e[6]=n("h1",null,"发布公告",-1)),n("button",{class:"btn",onClick:e[0]||(e[0]=(...t)=>i.handleBack&&i.handleBack(...t))},"返回公告列表")]),n("div",p,[n("form",{onSubmit:e[5]||(e[5]=b((...t)=>i.handlePublish&&i.handlePublish(...t),["prevent"]))},[n("div",v,[e[7]||(e[7]=n("label",{for:"title"},[r("公告标题 "),n("span",{class:"required"},"*")],-1)),l(n("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=t=>o.announcement.title=t),required:"",placeholder:"请输入公告标题"},null,512),[[u,o.announcement.title]])]),n("div",_,[e[8]||(e[8]=n("label",{for:"content"},[r("公告内容 "),n("span",{class:"required"},"*")],-1)),l(n("textarea",{id:"content","onUpdate:modelValue":e[2]||(e[2]=t=>o.announcement.content=t),required:"",placeholder:"请输入公告详细内容",rows:"10"},null,512),[[u,o.announcement.content]])]),n("div",y,[n("button",{type:"submit",class:"btn btn-primary",disabled:o.submitting},"发布公告",8,g),n("button",{type:"button",class:"btn btn-secondary",onClick:e[3]||(e[3]=(...t)=>i.handleSaveDraft&&i.handleSaveDraft(...t)),disabled:o.submitting},"保存草稿",8,k),n("button",{type:"button",class:"btn",onClick:e[4]||(e[4]=(...t)=>i.handleBack&&i.handleBack(...t))},"取消")])],32)])])}const D=d(h,[["render",x],["__scopeId","data-v-6b5e62b9"]]);export{D as default};
//# sourceMappingURL=AdminPublishAnnouncement-08d62c0b.js.map
