import{_ as d,r as u,o as m,c as a,a as r,b as g,w as f,d as v,e as i,v as l,h as y,n as b,t as F,f as w,g as h}from"./index-1ef266be.js";const N={name:"Register",data(){return{registerForm:{username:"",password:"",realName:"",phone:"",email:"",role:""},message:"",messageType:""}},methods:{handleRegister(){if(!this.registerForm.role){this.message="请选择用户角色！",this.messageType="error";return}fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.registerForm)}).then(t=>t.ok?t.json():t.text().then(e=>{throw new Error(e||"注册失败")})).then(t=>{this.message="注册成功！您的用户ID是："+t.userId,this.messageType="success",this.registerForm={username:"",password:"",realName:"",phone:"",email:"",role:""},setTimeout(()=>{this.$router.push("/login")},1500)}).catch(t=>{this.message="注册失败："+t.message,this.messageType="error"})}}},T={class:"container"},V={class:"nav-buttons"},x={class:"form-container"},k={class:"form-group"},U={class:"form-group"},C={class:"form-group"},R={class:"form-group"},S={class:"form-group"},q={class:"form-group"};function B(t,e,D,M,s,n){const p=u("router-link");return m(),a("div",T,[e[18]||(e[18]=r("h1",null,"智能社区服务平台",-1)),r("div",V,[g(p,{to:"/login",class:"btn btn-secondary"},{default:f(()=>[...e[7]||(e[7]=[h("登录",-1)])]),_:1}),e[8]||(e[8]=r("button",{class:"btn btn-primary"},"注册",-1))]),r("div",x,[e[17]||(e[17]=r("h2",null,"用户注册",-1)),r("form",{onSubmit:e[6]||(e[6]=v((...o)=>n.handleRegister&&n.handleRegister(...o),["prevent"]))},[r("div",k,[e[9]||(e[9]=r("label",{for:"username"},"用户名",-1)),i(r("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>s.registerForm.username=o),placeholder:"请输入用户名",required:""},null,512),[[l,s.registerForm.username]])]),r("div",U,[e[10]||(e[10]=r("label",{for:"password"},"密码",-1)),i(r("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>s.registerForm.password=o),placeholder:"请输入密码",required:""},null,512),[[l,s.registerForm.password]])]),r("div",C,[e[11]||(e[11]=r("label",{for:"realName"},"真实姓名",-1)),i(r("input",{type:"text",id:"realName","onUpdate:modelValue":e[2]||(e[2]=o=>s.registerForm.realName=o),placeholder:"请输入真实姓名"},null,512),[[l,s.registerForm.realName]])]),r("div",R,[e[12]||(e[12]=r("label",{for:"phone"},"手机号码",-1)),i(r("input",{type:"tel",id:"phone","onUpdate:modelValue":e[3]||(e[3]=o=>s.registerForm.phone=o),placeholder:"请输入手机号码"},null,512),[[l,s.registerForm.phone]])]),r("div",S,[e[13]||(e[13]=r("label",{for:"email"},"邮箱",-1)),i(r("input",{type:"email",id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>s.registerForm.email=o),placeholder:"请输入邮箱"},null,512),[[l,s.registerForm.email]])]),r("div",q,[e[15]||(e[15]=r("label",{for:"role"},"用户角色",-1)),i(r("select",{id:"role","onUpdate:modelValue":e[5]||(e[5]=o=>s.registerForm.role=o),required:""},[...e[14]||(e[14]=[r("option",{value:""},"请选择角色",-1),r("option",{value:"resident"},"居民",-1),r("option",{value:"property_admin"},"物业管理员",-1),r("option",{value:"service_provider"},"服务商",-1)])],512),[[y,s.registerForm.role]])]),e[16]||(e[16]=r("button",{type:"submit",class:"btn btn-primary",style:{width:"100%","margin-bottom":"1rem"}},"注册",-1)),s.message?(m(),a("div",{key:0,class:b(["message",s.messageType])},F(s.message),3)):w("",!0)],32)])])}const E=d(N,[["render",B]]);export{E as default};
//# sourceMappingURL=Register-64899bed.js.map
