{"version":3,"file":"AdminEditAnnouncement-7aa41932.js","sources":["../../src/views/AdminEditAnnouncement.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h1>编辑公告</h1>\n      <button class=\"btn\" @click=\"handleBack\">返回公告列表</button>\n    </header>\n\n    <div class=\"edit-form\">\n      <div v-if=\"loading\" class=\"loading\">加载中...</div>\n      <div v-else-if=\"!announcement.id\" class=\"error\">公告不存在或已被删除</div>\n      <form v-else @submit.prevent=\"handleUpdate\">\n        <div class=\"form-group\">\n          <label for=\"title\">公告标题 <span class=\"required\">*</span></label>\n          <input type=\"text\" id=\"title\" v-model=\"announcement.title\" required placeholder=\"请输入公告标题\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"content\">公告内容 <span class=\"required\">*</span></label>\n          <textarea id=\"content\" v-model=\"announcement.content\" required placeholder=\"请输入公告详细内容\" rows=\"10\"></textarea>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"status\">公告状态 <span class=\"required\">*</span></label>\n          <select id=\"status\" v-model.number=\"announcement.status\" required>\n            <option value=\"1\">已发布</option>\n            <option value=\"0\">草稿</option>\n          </select>\n        </div>\n\n        <div class=\"form-actions\">\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"submitting\">更新公告</button>\n          <button type=\"button\" class=\"btn\" @click=\"handleBack\">取消</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { announcementApi } from '../services/api';\n\nexport default {\n  name: 'AdminEditAnnouncement',\n  data() {\n    return {\n      announcement: {\n        id: null,\n        title: '',\n        content: '',\n        status: 1\n      },\n      loading: true,\n      submitting: false\n    }\n  },\n  mounted() {\n    this.fetchAnnouncementDetail();\n  },\n  methods: {\n    async fetchAnnouncementDetail() {\n      this.loading = true;\n      try {\n        const announcementId = this.$route.params.id;\n        const response = await announcementApi.getAnnouncementDetail(announcementId);\n        if (response.code === 'success') {\n          this.announcement = response.data;\n        } else {\n          console.error('获取公告详情失败:', response.message);\n          alert('获取公告详情失败');\n        }\n      } catch (error) {\n        console.error('获取公告详情失败:', error);\n        alert('获取公告详情失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async handleUpdate() {\n      this.submitting = true;\n      try {\n        // 验证表单数据\n        if (!this.announcement.title.trim() || !this.announcement.content.trim()) {\n          alert('标题和内容不能为空');\n          return;\n        }\n\n        const response = await announcementApi.updateAnnouncement(this.announcement.id, this.announcement);\n        if (response.code === 'success') {\n          alert('公告更新成功！');\n          this.$router.push('/admin/announcements');\n        } else {\n          console.error('更新公告失败:', response.message);\n          alert(`更新公告失败：${response.message}`);\n        }\n      } catch (error) {\n        console.error('更新公告失败:', error);\n        alert('更新公告失败，请稍后重试');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    handleBack() {\n      this.$router.push('/admin/announcements');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.edit-form {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.required {\n  color: #ff4d4f;\n}\n\ninput[type=\"text\"],\ntextarea,\nselect {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\ntextarea {\n  resize: vertical;\n  min-height: 150px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-start;\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid #eee;\n}\n\n.btn-primary {\n  background-color: #1890ff;\n  color: white;\n}\n\n.btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.loading,\n.error {\n  text-align: center;\n  padding: 50px 0;\n  font-size: 16px;\n}\n\n.loading {\n  color: #1890ff;\n}\n\n.error {\n  color: #ff4d4f;\n}\n</style>"],"names":["_sfc_main","announcementId","response","announcementApi","error","_hoisted_1","_hoisted_2","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_openBlock","_createElementBlock","_createElementVNode","_cache","$options","args","$data","_hoisted_3","$event","_vModelText","_hoisted_9","_hoisted_4"],"mappings":"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"}