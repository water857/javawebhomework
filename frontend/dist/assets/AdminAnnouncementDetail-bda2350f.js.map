{"version":3,"file":"AdminAnnouncementDetail-bda2350f.js","sources":["../../src/views/AdminAnnouncementDetail.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h1>公告详情</h1>\n      <button class=\"btn\" @click=\"handleBack\">返回公告列表</button>\n    </header>\n\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    <div v-else-if=\"!announcement\" class=\"no-data\">公告不存在</div>\n    <div v-else class=\"announcement-detail\">\n      <div class=\"announcement-header\">\n        <h2>{{ announcement.title }}</h2>\n        <span class=\"announcement-status\" :class=\"getStatusClass(announcement.status)\">{{ getStatusText(announcement.status) }}</span>\n      </div>\n\n      <div class=\"announcement-info\">\n        <div class=\"info-item\">\n          <label>发布者:</label>\n          <span>{{ announcement.authorName || '匿名' }}</span>\n        </div>\n        <div class=\"info-item\">\n          <label>发布时间:</label>\n          <span>{{ formatDateTime(announcement.publishedAt || announcement.createdAt) }}</span>\n        </div>\n        <div class=\"info-item\">\n          <label>创建时间:</label>\n          <span>{{ formatDateTime(announcement.createdAt) }}</span>\n        </div>\n        <div class=\"info-item\" v-if=\"announcement.updatedAt\">\n          <label>更新时间:</label>\n          <span>{{ formatDateTime(announcement.updatedAt) }}</span>\n        </div>\n      </div>\n\n      <div class=\"announcement-content\">\n        <h3>公告内容</h3>\n        <p>{{ announcement.content }}</p>\n      </div>\n\n      <!-- 公告管理操作 -->\n      <div class=\"announcement-actions\">\n        <h3>公告管理</h3>\n        <div class=\"status-update-section\">\n          <label>更新公告状态:</label>\n          <select v-model.number=\"selectedStatus\" class=\"status-select\">\n            <option :value=\"0\">草稿</option>\n            <option :value=\"1\">已发布</option>\n          </select>\n          <button class=\"btn btn-primary\" @click=\"handleUpdateStatus\" :disabled=\"selectedStatus == announcement.status\">更新状态</button>\n        </div>\n        <div class=\"action-buttons\">\n          <button class=\"btn btn-edit\" @click=\"handleEditAnnouncement\">编辑公告</button>\n          <button class=\"btn btn-delete\" @click=\"handleDeleteAnnouncement\">删除公告</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { announcementApi } from '../services/api';\n\nexport default {\n  name: 'AdminAnnouncementDetail',\n  data() {\n    return {\n      announcement: null,\n      loading: false,\n      selectedStatus: ''\n    }\n  },\n  mounted() {\n    this.fetchAnnouncementDetail();\n  },\n  methods: {\n    async fetchAnnouncementDetail() {\n      this.loading = true;\n      try {\n        const announcementId = this.$route.params.id;\n        const response = await announcementApi.getAnnouncementDetail(announcementId);\n        if (response.code === 'success') {\n          this.announcement = response.data;\n          this.selectedStatus = this.announcement.status;\n        } else {\n          console.error('获取公告详情失败:', response.message);\n          alert('获取公告详情失败');\n        }\n      } catch (error) {\n        console.error('获取公告详情失败:', error);\n        alert('获取公告详情失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async handleUpdateStatus() {\n      try {\n        const response = await announcementApi.updateAnnouncementStatus(this.announcement.id, this.selectedStatus);\n        if (response.code === 'success') {\n          alert('公告状态更新成功！');\n          // 刷新公告详情\n          this.fetchAnnouncementDetail();\n        } else {\n          alert(`公告状态更新失败：${response.message}`);\n        }\n      } catch (error) {\n        console.error('公告状态更新失败:', error);\n        alert('公告状态更新失败，请稍后重试');\n      }\n    },\n    async handleDeleteAnnouncement() {\n      if (confirm('确定要删除这条公告吗？')) {\n        try {\n          const response = await announcementApi.deleteAnnouncement(this.announcement.id);\n          if (response.code === 'success') {\n            alert('公告删除成功');\n            this.handleBack();\n          } else {\n            console.error('删除公告失败:', response.message);\n            alert('删除公告失败');\n          }\n        } catch (error) {\n          console.error('删除公告失败:', error);\n          alert('删除公告失败，请稍后重试');\n        }\n      }\n    },\n    handleEditAnnouncement() {\n      this.$router.push(`/admin/announcements/edit/${this.announcement.id}`);\n    },\n    handleBack() {\n      this.$router.push('/admin/announcements');\n    },\n    formatDateTime(dateTime) {\n      if (!dateTime) return '';\n      const date = new Date(dateTime);\n      return date.toLocaleString('zh-CN');\n    },\n    getStatusText(status) {\n      return status === 1 ? '已发布' : '草稿';\n    },\n    getStatusClass(status) {\n      return status === 1 ? 'published' : 'draft';\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.loading, .no-data {\n  text-align: center;\n  padding: 50px 0;\n  color: #666;\n}\n\n.announcement-detail {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.announcement-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.announcement-header h2 {\n  margin: 0;\n  color: #333;\n}\n\n/* 公告状态样式 */\n.announcement-status {\n  padding: 5px 10px;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.announcement-status.published {\n  background-color: #f6ffed;\n  color: #52c41a;\n}\n\n.announcement-status.draft {\n  background-color: #fffbe6;\n  color: #faad14;\n}\n\n.announcement-info {\n  background-color: #fafafa;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.info-item:last-child {\n  margin-bottom: 0;\n}\n\n.info-item label {\n  font-weight: bold;\n  color: #333;\n  width: 100px;\n  margin-right: 10px;\n}\n\n.info-item span {\n  color: #666;\n}\n\n.announcement-content {\n  margin-bottom: 30px;\n}\n\n.announcement-content h3 {\n  margin: 0 0 15px 0;\n  color: #333;\n}\n\n.announcement-content p {\n  color: #555;\n  line-height: 1.8;\n  font-size: 16px;\n  white-space: pre-wrap;\n}\n\n/* 公告操作样式 */\n.announcement-actions {\n  background-color: #fafafa;\n  padding: 20px;\n  border-radius: 8px;\n}\n\n.announcement-actions h3 {\n  margin: 0 0 15px 0;\n  color: #333;\n}\n\n.status-update-section {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.status-update-section label {\n  font-weight: bold;\n  color: #333;\n}\n\n.status-select {\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.btn-edit {\n  background-color: #1890ff;\n  color: white;\n}\n\n.btn-delete {\n  background-color: #ff4d4f;\n  color: white;\n}\n</style>"],"names":["_sfc_main","announcementId","response","announcementApi","error","dateTime","status","_hoisted_1","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_15","_openBlock","_createElementBlock","_createElementVNode","_cache","$options","args","$data","_hoisted_2","_hoisted_4","_toDisplayString","_hoisted_10","$event","_hoisted_14","_hoisted_3"],"mappings":"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"}