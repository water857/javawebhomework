import{c as m}from"./api-5fa05d82.js";import{_ as p,o as c,c as v,a as i,d as y,g as r,e as l,v as o}from"./index-1ef266be.js";const b={name:"AdminPublishActivity",data(){return{activity:{title:"",content:"",startTime:"",endTime:"",location:"",maxParticipants:0},submitting:!1}},methods:{async handlePublish(){this.submitting=!0;try{const a=new Date(this.activity.startTime);if(new Date(this.activity.endTime)<=a){alert("结束时间必须晚于开始时间");return}const u={...this.activity,startTime:new Date(this.activity.startTime).toISOString(),endTime:new Date(this.activity.endTime).toISOString()},d=await m.publishActivity(u);d.code==="success"?(alert("活动发布成功！"),this.$router.push("/admin/activities")):alert(`活动发布失败：${d.message}`)}catch(a){console.error("发布活动失败:",a),alert("发布活动失败，请稍后重试")}finally{this.submitting=!1}},handleBack(){this.$router.push("/admin/activities")}}},f={class:"container"},T={class:"publish-form"},h={class:"form-group"},g={class:"form-group"},x={class:"form-row"},q={class:"form-group"},P={class:"form-group"},k={class:"form-group"},w={class:"form-group"},B={class:"form-actions"},V=["disabled"];function A(a,t,u,d,s,n){return c(),v("div",f,[i("header",null,[t[9]||(t[9]=i("h1",null,"发布活动",-1)),i("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>n.handleBack&&n.handleBack(...e))},"返回活动列表")]),i("div",T,[i("form",{onSubmit:t[8]||(t[8]=y((...e)=>n.handlePublish&&n.handlePublish(...e),["prevent"]))},[i("div",h,[t[10]||(t[10]=i("label",{for:"title"},[r("活动标题 "),i("span",{class:"required"},"*")],-1)),l(i("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>s.activity.title=e),required:"",placeholder:"请输入活动标题"},null,512),[[o,s.activity.title]])]),i("div",g,[t[11]||(t[11]=i("label",{for:"content"},[r("活动内容 "),i("span",{class:"required"},"*")],-1)),l(i("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=e=>s.activity.content=e),required:"",placeholder:"请输入活动详细内容",rows:"6"},null,512),[[o,s.activity.content]])]),i("div",x,[i("div",q,[t[12]||(t[12]=i("label",{for:"startTime"},[r("开始时间 "),i("span",{class:"required"},"*")],-1)),l(i("input",{type:"datetime-local",id:"startTime","onUpdate:modelValue":t[3]||(t[3]=e=>s.activity.startTime=e),required:""},null,512),[[o,s.activity.startTime]])]),i("div",P,[t[13]||(t[13]=i("label",{for:"endTime"},[r("结束时间 "),i("span",{class:"required"},"*")],-1)),l(i("input",{type:"datetime-local",id:"endTime","onUpdate:modelValue":t[4]||(t[4]=e=>s.activity.endTime=e),required:""},null,512),[[o,s.activity.endTime]])])]),i("div",k,[t[14]||(t[14]=i("label",{for:"location"},[r("活动地点 "),i("span",{class:"required"},"*")],-1)),l(i("input",{type:"text",id:"location","onUpdate:modelValue":t[5]||(t[5]=e=>s.activity.location=e),required:"",placeholder:"请输入活动地点"},null,512),[[o,s.activity.location]])]),i("div",w,[t[15]||(t[15]=i("label",{for:"maxParticipants"},"最大参与人数",-1)),l(i("input",{type:"number",id:"maxParticipants","onUpdate:modelValue":t[6]||(t[6]=e=>s.activity.maxParticipants=e),min:"0",placeholder:"0表示无限制"},null,512),[[o,s.activity.maxParticipants,void 0,{number:!0}]])]),i("div",B,[i("button",{type:"submit",class:"btn btn-primary",disabled:s.submitting},"发布活动",8,V),i("button",{type:"button",class:"btn",onClick:t[7]||(t[7]=(...e)=>n.handleBack&&n.handleBack(...e))},"取消")])],32)])])}const S=p(b,[["render",A]]);export{S as default};
//# sourceMappingURL=AdminPublishActivity-9b838767.js.map
